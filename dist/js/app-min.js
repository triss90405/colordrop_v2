var loadColors=function(){$.ajax({type:"GET",url:"/get_colors.php",dataType:"HTML",success:function(e){var o=JSON.parse(e);o.forEach(function(e){var o=e.hex.split(" "),a=e.id;$(".home").append('<div class="item" id="'+a+'" data-id="'+a+'"><div class="color" style="background-color:#'+o[0]+'" data-color="'+o[0]+'"></div><div class="color" style="background-color:#'+o[1]+'" data-color="'+o[1]+'"></div><div class="color" style="background-color:#'+o[2]+'" data-color="'+o[2]+'"></div><div class="color" style="background-color:#'+o[3]+'" data-color="'+o[3]+'"></div></div>')})}})},loadFavourites=function(){$.ajax({type:"GET",url:"/get_colors.php",dataType:"HTML",success:function(e){var o=JSON.parse(e);o.forEach(function(e){var o=localStorage.getItem("palettes"),a=o.split(","),t=e.hex.split(" "),r=e.id,l=""+r;a.indexOf(l)>=0&&$(".favourites").append('<div class="item" id="'+r+'" data-id="'+r+'"><div class="color" style="background-color:#'+t[0]+'" data-color="'+t[0]+'"></div><div class="color" style="background-color:#'+t[1]+'" data-color="'+t[1]+'"></div><div class="color" style="background-color:#'+t[2]+'" data-color="'+t[2]+'"></div><div class="color" style="background-color:#'+t[3]+'" data-color="'+t[3]+'"></div></div>')})}})},hexToRgb=function(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,o,a,t){return"#"+o+o+a+a+t+t}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)})},sidebar=function(){var e=$("#content"),o=$(".sidebar"),a=$("#close-sidebar"),t=$("#changeBgColor");e.on("click",".item",function(e){e.stopPropagation();var a=$(e.target).parent().data("id"),r=$(e.target).parent().children(),l=localStorage.getItem("palettes");o.find(".color").remove(),$("#navigation").removeClass("active"),$(".nav-toggle").removeClass("active"),r.each(function(){var e=$(this).data("color");o.append('<div class="color"><div class="example" style="background-color:#'+e+'"></div><div class="hex"><span>HEX: </span>#'+e+'</div><div class="rgb"><span>RGB: </span>'+hexToRgb("#"+e)+"</div></div>")}),o.find(".favourite").remove(),t.removeClass("active"),o.addClass("active"),l&&l.indexOf(a)!==-1?(o.append('<button id="removeFavourite" class="favourite remove" value="'+a+'">Remove favourite</button>'),loadColors()):o.append('<button id="favourite" class="favourite" value="'+a+'">+ Add favourite</button>')}),$(document).on("keyup",function(e){27===e.keyCode&&(o.removeClass("active"),o.find(".favourite").remove(),$("#navigation").removeClass("active"),$(".nav-toggle").removeClass("active"))}),a.on("click",function(){o.removeClass("active"),t.removeClass("active"),o.find(".favourite").remove()})},changeBgColor=function(){var e=$("#content"),o=$("#pink"),a=$("#green"),t=$("#blue"),r=$("#yellow"),l=$("#grey"),s=$("#red"),i=$("#black"),c=$("#changeBgColorButton"),n=$("#changeBgColor");c.on("click",function(e){n.toggleClass("active"),e.stopPropagation()}),$(document).on("keyup",function(e){27===e.keyCode&&n.removeClass("active")}),o.on("click",function(){e.removeClass(),e.addClass("pink"),n.removeClass("active")}),a.on("click",function(){e.removeClass(),e.addClass("green"),n.removeClass("active")}),t.on("click",function(){e.removeClass(),e.addClass("blue"),n.removeClass("active")}),r.on("click",function(){e.removeClass(),e.addClass("yellow"),n.removeClass("active")}),l.on("click",function(){e.removeClass(),e.addClass("grey"),n.removeClass("active")}),s.on("click",function(){e.removeClass(),e.addClass("red"),n.removeClass("active")}),i.on("click",function(){e.removeClass(),e.addClass("black"),n.removeClass("active")})},favourite=function(){var e=$("body");e.on("click","#favourite",function(){var o=$("#favourite"),a=$(".sidebar"),t=$("#favourite").attr("value"),r=localStorage.getItem("palettes");r||(r=""),localStorage.setItem("palettes",r+t+","),$(".alert").remove(),$('<div style="display: none;" class="alert success">Palette saved!</div>').appendTo(e).slideDown("fast"),o.remove(),a.append('<button id="removeFavourite" class="favourite remove" value="'+t+'">Remove favourite</button>'),setTimeout(function(){$(".alert").remove()},3e3)})},removeFavourite=function(){var e=$("body");e.on("click","#removeFavourite",function(){var o=$("#content"),a=$(".sidebar"),t=""+$("#removeFavourite").attr("value"),r=localStorage.getItem("palettes"),l=r.split(","),s=$("#favourite");l=$.grep(l,function(e){return e!==t});var i=l;localStorage.setItem("palettes",i),o.hasClass("favourites")&&(o.empty(),loadFavourites()),$(".alert").remove(),$('<div style="display: none;" class="alert error">Palette removed from favourites</div>').appendTo(e).slideDown("fast"),setTimeout(function(){$(".alert").remove()},3e3),s.remove(),a.append('<button id="favourite" class="favourite" value="'+t+'">+ Add favourite</button>')})},mobileMenu=function(){var e=$("#nav-toggle"),o=$("#navigation");e.on("click",function(){o.toggleClass("active"),$(this).toggleClass("active"),$(".sidebar").removeClass("active")})};$(document).ready(function(){loadColors(),sidebar(),changeBgColor(),favourite(),loadFavourites(),removeFavourite(),mobileMenu()});